{"filter":false,"title":"dynamicS.c","tooltip":"/socketl2/dynamicS.c","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":95,"column":0},"action":"insert","lines":["#include <stdio.h>","#include <netdb.h>","#include <netinet/in.h>","#include <stdlib.h>","#include <string.h>","#include <sys/socket.h>","#include <sys/types.h>","#define MAX 80","#define PORT 8080","#define SA struct sockaddr","","// Function designed for chat between client and server.","void func(int sockfd)","{","\tchar buff[MAX];","\tint n;","\t// infinite loop for chat","\tfor (;;) {","\t\tbzero(buff, MAX);","","\t\t// read the message from client and copy it in buffer","\t\tread(sockfd, buff, sizeof(buff));","\t\t// print buffer which contains the client contents","\t\tprintf(\"From client: %s\\t To client : \", buff);","\t\tbzero(buff, MAX);","\t\tn = 0;","\t\t// copy server message in the buffer","\t\twhile ((buff[n++] = getchar()) != '\\n')","\t\t\t;","","\t\t// and send that buffer to client","\t\twrite(sockfd, buff, sizeof(buff));","","\t\t// if msg contains \"Exit\" then server exit and chat ended.","\t\tif (strncmp(\"exit\", buff, 4) == 0) {","\t\t\tprintf(\"Server Exit...\\n\");","\t\t\tbreak;","\t\t}","\t}","}","","// Driver function","int main()","{","\tint sockfd, connfd, len;","\tstruct sockaddr_in servaddr, cli;","","\t// socket create and verification","\tsockfd = socket(AF_INET, SOCK_STREAM, 0);","\tif (sockfd == -1) {","\t\tprintf(\"socket creation failed...\\n\");","\t\texit(0);","\t}","\telse","\t\tprintf(\"Socket successfully created..\\n\");","\tbzero(&servaddr, sizeof(servaddr));","","\t// assign IP, PORT","\tservaddr.sin_family = AF_INET;","\tservaddr.sin_addr.s_addr = htonl(INADDR_ANY);","\tservaddr.sin_port = htons(PORT);","","\t// Binding newly created socket to given IP and verification","\tif ((bind(sockfd, (SA*)&servaddr, sizeof(servaddr))) != 0) {","\t\tprintf(\"socket bind failed...\\n\");","\t\texit(0);","\t}","\telse","\t\tprintf(\"Socket successfully binded..\\n\");","","\t// Now server is ready to listen and verification","\tif ((listen(sockfd, 5)) != 0) {","\t\tprintf(\"Listen failed...\\n\");","\t\texit(0);","\t}","\telse","\t\tprintf(\"Server listening..\\n\");","\tlen = sizeof(cli);","","\t// Accept the data packet from client and verification","\tconnfd = accept(sockfd, (SA*)&cli, &len);","\tif (connfd < 0) {","\t\tprintf(\"server acccept failed...\\n\");","\t\texit(0);","\t}","\telse","\t\tprintf(\"server acccept the client...\\n\");","","\t// Function for chatting between client and server","\tfunc(connfd);","","\t// After chatting close the socket","\tclose(sockfd);","}","",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":95,"column":0},"end":{"row":95,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1629358307421,"hash":"5efde010fb08038c46020aa57ab55b3ee21f8f06"}